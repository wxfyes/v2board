# ---------------------------------------------------
# V2Board Custom Clash Configuration
# Generated by V2Board & Antigravity
# ---------------------------------------------------

port: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7890
allow-lan: true
mode: rule
log-level: info
external-controller: :9090

# ========================
# ğŸš€ æ€§èƒ½ä¼˜åŒ–å‚æ•° (Antigravity Optimized)
# ========================
keep-alive-interval: 15
find-process-mode: strict
ipv6: true # å¼€å¯IPv6æ”¯æŒï¼ˆå¦‚æœèŠ‚ç‚¹æ”¯æŒï¼‰
external-ui: dashboard
tcp-concurrent: true # å¼€å¯ TCP å¹¶å‘ï¼Œé™ä½å»¶è¿Ÿ
unified-delay: true  # ç»Ÿä¸€å»¶è¿Ÿè®¡ç®—ï¼Œå»é™¤æ¡æ‰‹è¯¯å·®

sniffer:
  enable: true
  parse-pure-ip: true
  sniff:
    tls:
      ports: [443, 8443]
    http:
      ports: [80, 8080-8880]
  force-domain:
    - "+"
  skip-domain:
    - "Mijia Cloud"

geodata-mode: true
geox-url:
  geoip: "https://gcore.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat"
  geosite: "https://gcore.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat"
  mmdb: "https://gcore.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb"

dns:
  enable: true
  listen: :53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  proxy-server-nameserver:
    - quic://154.219.104.214
    - quic://103.20.222.133
    - tls://103.20.222.133
    - tls://154.219.104.214
    - tls://154.219.96.225
    - quic://154.219.96.225
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  fallback:
    - https://1.1.1.1/dns-query
    - https://8.8.8.8/dns-query
  fallback-filter:
    geoip: true
    ipcidr:
      - 240.0.0.0/4

proxies:
  # Proxies

proxy-groups:
  # ==========================================
  # çº§åˆ« 0: æœ€åº•å±‚è‡ªåŠ¨æµ‹é€Ÿç»„ (URL-Test)
  # ä¿®æ­£ï¼šå¿…é¡»åŠ åŒå¼•å·ï¼Œä¸”åŠ  u ä¿®é¥°ç¬¦ï¼Œä¸”ç¡®ä¿å…¶ä»–ç»„ä¸ä¸ºç©º
  # ==========================================
  
  - name: âš¡ é¦™æ¸¯è‡ªåŠ¨
    type: url-test
    url: http://www.google.com/generate_204
    interval: 300
    tolerance: 50
    proxies:
      - "/(?i)(HK|Hong|Kong|é¦™æ¸¯)/u"
    hidden: true

  - name: âš¡ å°æ¹¾è‡ªåŠ¨
    type: url-test
    url: http://www.google.com/generate_204
    interval: 300
    tolerance: 50
    proxies:
      - "/(?i)(TW|Tai|Wan|å°æ¹¾)/u"
    hidden: true

  - name: âš¡ æ—¥æœ¬è‡ªåŠ¨
    type: url-test
    url: http://www.google.com/generate_204
    interval: 300
    tolerance: 50
    proxies:
      - "/(?i)(JP|Japan|Osaka|Tokyo|æ—¥æœ¬|å¤§é˜ª)/u"
    hidden: true

  - name: âš¡ æ–°åŠ å¡è‡ªåŠ¨
    type: url-test
    url: http://www.google.com/generate_204
    interval: 300
    tolerance: 50
    proxies:
      - "/(?i)(SG|Sing|æ–°åŠ å¡)/u"
    hidden: true

  - name: âš¡ ç¾å›½è‡ªåŠ¨
    type: url-test
    url: http://www.google.com/generate_204
    interval: 300
    tolerance: 50
    proxies:
      - "/(?i)(US|United|America|ç¾å›½|æ´›æ‰çŸ¶|åœ£ä½•å¡|æ—§é‡‘å±±|åŠ å·|å¯†è‹é‡Œ)/u"
    hidden: true

  - name: âš¡ éŸ©å›½è‡ªåŠ¨
    type: url-test
    url: http://www.google.com/generate_204
    interval: 300
    tolerance: 50
    proxies:
      - "/(?i)(KR|Korea|éŸ©å›½)/u"
    hidden: true
  
  - name: âš¡ å…¶ä»–è‡ªåŠ¨
    type: url-test
    url: http://www.google.com/generate_204
    interval: 300
    tolerance: 50
    proxies:
      - "/(?i)(.*)/u"
    hidden: true


  # ==========================================
  # çº§åˆ« 1: æ ¸å¿ƒå…¥å£ç»„
  # ==========================================
  
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
      - ğŸŒ å…¨éƒ¨èŠ‚ç‚¹
      - ğŸŒ å›½å¤–åª’ä½“
      - ğŸ“² ç”µæŠ¥ä¿¡æ¯
      - ğŸ¤– äººå·¥æ™ºèƒ½
      - ğŸ è‹¹æœæœåŠ¡
      - ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
      - ğŸŸ æ¼ç½‘ä¹‹é±¼
      - DIRECT

  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    url: http://www.google.com/generate_204
    interval: 300
    tolerance: 50
    proxies: []

  # ==========================================
  # çº§åˆ« 2: åœ°åŒºé€‰æ‹©ç»„
  # ==========================================

  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    type: select
    proxies:
      - âš¡ é¦™æ¸¯è‡ªåŠ¨
      - "/(?i)(HK|Hong|Kong|é¦™æ¸¯)/u"
      - DIRECT

  - name: ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹
    type: select
    proxies:
      - âš¡ å°æ¹¾è‡ªåŠ¨
      - "/(?i)(TW|Tai|Wan|å°æ¹¾)/u"
      - DIRECT

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    type: select
    proxies:
      - âš¡ æ—¥æœ¬è‡ªåŠ¨
      - "/(?i)(JP|Japan|Osaka|Tokyo|æ—¥æœ¬|å¤§é˜ª)/u"
      - DIRECT

  - name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
    type: select
    proxies:
      - âš¡ æ–°åŠ å¡è‡ªåŠ¨
      - "/(?i)(SG|Sing|æ–°åŠ å¡)/u"
      - DIRECT

  - name: ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
    type: select
    proxies:
      - âš¡ ç¾å›½è‡ªåŠ¨
      - "/(?i)(US|United|America|ç¾å›½|æ´›æ‰çŸ¶|åœ£ä½•å¡|æ—§é‡‘å±±|åŠ å·|å¯†è‹é‡Œ)/u"
      - DIRECT

  - name: ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
    type: select
    proxies:
      - âš¡ éŸ©å›½è‡ªåŠ¨
      - "/(?i)(KR|Korea|éŸ©å›½)/u"
      - DIRECT
  
  - name: ğŸŒ å…¨éƒ¨èŠ‚ç‚¹
    type: select
    proxies:
      - âš¡ å…¶ä»–è‡ªåŠ¨
      - "/(?i)(.*)/u"
      - DIRECT


  # ==========================================
  # çº§åˆ« 3: åŠŸèƒ½ç»„ (æ— å¾ªç¯å¼•ç”¨)
  # ==========================================
  
  - name: ğŸŒ å›½å¤–åª’ä½“
    type: select
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
      - ğŸŒ å…¨éƒ¨èŠ‚ç‚¹

  - name: ğŸ“² ç”µæŠ¥ä¿¡æ¯
    type: select
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
      - ğŸŒ å…¨éƒ¨èŠ‚ç‚¹

  - name: ğŸ¤– äººå·¥æ™ºèƒ½
    type: select
    proxies:
      - ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹

  - name: ğŸ è‹¹æœæœåŠ¡
    type: select
    proxies:
      - DIRECT
      - ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹

  - name: ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
    type: select
    proxies:
      - REJECT
      - DIRECT

  - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    type: select
    proxies:
      - DIRECT

rule-providers:
  advertising:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Advertising/Advertising.yaml"
    path: ./ruleset/advertising.yaml
    interval: 86400

  reject:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt"
    path: ./ruleset/reject.yaml
    interval: 86400

  icloud:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt"
    path: ./ruleset/icloud.yaml
    interval: 86400

  apple:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt"
    path: ./ruleset/apple.yaml
    interval: 86400

  google:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt"
    path: ./ruleset/google.yaml
    interval: 86400

  proxy:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
    path: ./ruleset/proxy.yaml
    interval: 86400

  direct:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt"
    path: ./ruleset/direct.yaml
    interval: 86400

  private:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt"
    path: ./ruleset/private.yaml
    interval: 86400

  gfw:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt"
    path: ./ruleset/gfw.yaml
    interval: 86400

  telegram:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt"
    path: ./ruleset/telegramcidr.yaml
    interval: 86400

  cncidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt"
    path: ./ruleset/cncidr.yaml
    interval: 86400

  lancidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt"
    path: ./ruleset/lancidr.yaml
    interval: 86400

  applications:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt"
    path: ./ruleset/applications.yaml
    interval: 86400
    
  openai:
     type: http
     behavior: classical
     url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/OpenAI/OpenAI.yaml"
     path: ./ruleset/openai.yaml
     interval: 86400

rules:
  - RULE-SET,applications,DIRECT
  - DOMAIN,clash.razord.top,DIRECT
  - DOMAIN,yandex.ru,DIRECT
  - RULE-SET,private,DIRECT
  - RULE-SET,advertising,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,reject,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,icloud,DIRECT
  - RULE-SET,apple,ğŸ è‹¹æœæœåŠ¡
  - RULE-SET,openai,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,google,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,proxy,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,gfw,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,telegram,ğŸ“² ç”µæŠ¥ä¿¡æ¯
  - RULE-SET,direct,DIRECT
  - RULE-SET,lancidr,DIRECT
  - RULE-SET,cncidr,DIRECT
  - GEOIP,LAN,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
