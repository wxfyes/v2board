"use strict";(self.webpackChunkez_theme=self.webpackChunkez_theme||[]).push([[150],{47152:(e,a,n)=>{n.d(a,{bV:()=>r,cE:()=>c,hj:()=>u,of:()=>s,ug:()=>l,ze:()=>o});var t=n(96131);function l(){return(0,t.A)({url:"/user/info",method:"get"})}function r(){return(0,t.A)({url:"/user/getSubscribe",method:"get"})}function s(){return(0,t.A)({url:"/user/notice/fetch",method:"get"})}function u(){return(0,t.A)({url:"/user/getStat",method:"get"})}function c(){return(0,t.A)({url:"/user/comm/config",method:"get"})}function o(){return(0,t.A)({url:"/user/newPeriod",method:"POST"})}},64150:(e,a,n)=>{n.r(a),n.d(a,{default:()=>le});var t=n(20908),l=n(30388),r=(n(44114),n(9868),n(78459),n(27495),n(25440),n(20641)),s=n(90033),u=n(53751),c=n(50953),o=n(46992),i=n(33366),d=n(98120),v=n(92549),p=n(96131);function k(e){return(0,p.A)({url:"/user/order/save",method:"post",data:{period:"deposit",deposit_amount:e,plan_id:0}})}var m=n(47152),f=n(80394),b=n(75220),L={class:"deposit-container"},h={class:"deposit-inner"},w={class:"dashboard-card welcome-card"},y={class:"card-header"},_={class:"card-title"},A={class:"card-body"},g={class:"dashboard-card balance-card"},C={class:"card-header"},E={class:"card-title"},X={class:"header-renewal-control"},F=["disabled"],K={class:"card-body"},R={key:0,class:"balance-display"},$={class:"balance-value"},I={class:"balance-label"},W={key:1,class:"balance-skeleton"},T={class:"dashboard-card deposit-card"},z={class:"card-header"},N={class:"card-title"},S={class:"card-body"},V={class:"deposit-notice"},G={class:"amount-selection"},O={class:"period-cards"},q=["onClick"],P={class:"period-card-inner"},x={class:"period-price"},D={class:"currency"},M={class:"amount"},U={class:"custom-amount"},j={for:"customAmount"},B={key:0,class:"input-container skeleton-input"},H={key:1,class:"input-container"},J={class:"currency-symbol"},Q=["placeholder"],Y={key:2,class:"error-message"},Z={class:"deposit-actions"},ee={key:0,class:"btn-order-skeleton"},ae=["disabled"],ne={key:1,class:"loader"};const te={__name:"WalletDeposit",setup:function(e){var a=(0,o.s9)().t,n=(0,i.d)().showToast,p=(0,b.rd)();(0,f.isXiaoV2board)()||p.push("/dashboard");var te=(0,c.KR)(0),le=(0,c.KR)("$"),re=(0,c.KR)(!1),se=(0,c.KR)(!1),ue=(0,c.Kh)({balance:!0,submitting:!1,config:!0}),ce=(0,c.KR)(f.WALLET_CONFIG.presetAmounts||[6,30,68,128,256,328,648,1280]),oe=(0,c.KR)(f.WALLET_CONFIG.defaultSelectedAmount||null),ie=(0,c.KR)(""),de=(0,c.KR)(""),ve=f.WALLET_CONFIG.minimumDepositAmount||1,pe=function(){var e=(0,l.A)((0,t.A)().m(function e(){var a;return(0,t.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,(0,m.cE)();case 1:(a=e.v)&&a.data&&a.data.currency_symbol&&(le.value=a.data.currency_symbol),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.p=3,ue.config=!1,e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=(0,l.A)((0,t.A)().m(function e(){var l,r;return(0,t.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return se.value=!0,e.p=1,e.n=2,(0,v.WI)({auto_renewal:re.value?1:0});case 2:n(a("profile.updateSuccess"),"success"),e.n=4;break;case 3:e.p=3,r=e.v,re.value=!re.value,n((null===(l=r.response)||void 0===l?void 0:l.message)||"error");case 4:return e.p=4,se.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),me=function(){if(oe.value=null,""!==ie.value){var e=parseFloat(ie.value);isNaN(e)||e<=0?de.value=a("wallet.deposit.amountError.invalid"):de.value=e<ve?a("wallet.deposit.amountError.minimum").replace("1",ve):""}else de.value=""},fe=(0,r.EW)(function(){return oe.value?oe.value:ie.value&&parseFloat(ie.value)>=1?parseFloat(ie.value):null}),be=(0,r.EW)(function(){return null!==fe.value}),Le=function(){var e=(0,l.A)((0,t.A)().m(function e(){var l,r,s;return(0,t.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return ue.balance=!0,e.p=1,e.n=2,(0,v.ug)();case 2:(l=e.v)&&l.data&&(te.value=l.data.balance||0,re.value=1===l.data.auto_renewal),e.n=4;break;case 3:e.p=3,s=e.v,n((null===(r=s.response)||void 0===r?void 0:r.message)||s.message||a("errors.serverError")||a("common.error_occurred"),"error");case 4:return e.p=4,ue.balance=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),he=function(){var e=(0,l.A)((0,t.A)().m(function e(){var l,r,s,u,c;return(0,t.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(be.value){e.n=1;break}return n(a("validation.required").replace("{field}",a("wallet.deposit.title"))||a("wallet.deposit.amountError.required"),"warning"),e.a(2);case 1:return e.p=1,ue.submitting=!0,l=Math.round(100*fe.value),e.n=2,k(l);case 2:(r=e.v)&&r.data&&(s=r.data,n(a("wallet.deposit.success"),"success"),p.push({path:"/payment",query:{trade_no:s,type:"deposit"}})),e.n=4;break;case 3:e.p=3,c=e.v,n((null===(u=c.response)||void 0===u?void 0:u.message)||c.message||a("errors.serverError")||a("wallet.deposit.failed"),"error");case 4:return e.p=4,ue.submitting=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}();return(0,r.sV)(function(){Le(),pe()}),function(e,a){return(0,r.uX)(),(0,r.CE)("div",L,[(0,r.Lk)("div",h,[(0,r.Lk)("div",w,[(0,r.Lk)("div",y,[(0,r.Lk)("h2",_,(0,s.v_)(e.$t("wallet.welcome.title")||"\u8d26\u6237\u5145\u503c"),1)]),(0,r.Lk)("div",A,[(0,r.Lk)("p",null,(0,s.v_)(e.$t("wallet.welcome.description")||"\u5728\u8fd9\u91cc\u60a8\u53ef\u4ee5\u8f7b\u677e\u5730\u4e3a\u60a8\u7684\u8d26\u6237\u5145\u503c\uff0c\u9009\u62e9\u9884\u8bbe\u91d1\u989d\u6216\u8f93\u5165\u81ea\u5b9a\u4e49\u91d1\u989d\u8fdb\u884c\u5145\u503c\u3002\u5145\u503c\u540e\u7684\u4f59\u989d\u5c06\u7acb\u5373\u5230\u8d26\u5e76\u53ef\u7528\u4e8e\u8d2d\u4e70\u6211\u4eec\u7684\u670d\u52a1\u3002"),1)])]),(0,r.Lk)("div",g,[(0,r.Lk)("div",C,[(0,r.Lk)("h2",E,(0,s.v_)(e.$t("wallet.balance.title")),1),(0,r.Lk)("div",X,[(0,r.Lk)("label",{class:(0,s.C4)(["switch",{disabled:se.value}])},[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=function(e){return re.value=e}),onChange:ke,disabled:se.value},null,40,F),[[u.lH,re.value]]),(0,r.Lk)("span",{class:(0,s.C4)(["slider round",{loading:se.value}])},null,2)],2),(0,r.Lk)("span",{class:(0,s.C4)(["renewal-title",{"is-active":re.value}])},(0,s.v_)(e.$t("wallet.balance.autorenew")),3)])]),(0,r.Lk)("div",K,[ue.balance?((0,r.uX)(),(0,r.CE)("div",W,a[2]||(a[2]=[(0,r.Lk)("div",{class:"skeleton-balance-value"},null,-1),(0,r.Lk)("div",{class:"skeleton-balance-label"},null,-1)]))):((0,r.uX)(),(0,r.CE)("div",R,[(0,r.Lk)("div",$,(0,s.v_)(le.value)+(0,s.v_)((n=te.value,(parseFloat(n)/100).toFixed(2))),1),(0,r.Lk)("div",I,(0,s.v_)(e.$t("wallet.balance.description")),1)]))])]),(0,r.Lk)("div",T,[(0,r.Lk)("div",z,[(0,r.Lk)("h2",N,(0,s.v_)(e.$t("wallet.deposit.title")),1)]),(0,r.Lk)("div",S,[(0,r.Lk)("div",V,[(0,r.bF)((0,c.R1)(d.GBC),{size:20,class:"notice-icon"}),(0,r.Lk)("span",null,(0,s.v_)(e.$t("wallet.deposit.notice")),1)]),(0,r.Lk)("div",G,[(0,r.Lk)("div",O,[ue.config?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},(0,r.pI)(4,function(e){return(0,r.Lk)("div",{key:"skeleton-".concat(e),class:"period-card skeleton-card"},a[3]||(a[3]=[(0,r.Lk)("div",{class:"period-card-inner"},[(0,r.Lk)("div",{class:"skeleton-price"})],-1)]))}),64)):((0,r.uX)(!0),(0,r.CE)(r.FK,{key:1},(0,r.pI)(ce.value,function(e,a){return(0,r.uX)(),(0,r.CE)("div",{key:a,class:(0,s.C4)(["period-card",{active:oe.value===e}]),onClick:function(a){return function(e){oe.value=e,ie.value="",de.value=""}(e)}},[(0,r.Lk)("div",P,[(0,r.Lk)("div",x,[(0,r.Lk)("span",D,(0,s.v_)(le.value),1),(0,r.Lk)("span",M,(0,s.v_)(e),1)])])],10,q)}),128))])]),(0,r.Lk)("div",U,[(0,r.Lk)("label",j,(0,s.v_)(e.$t("wallet.deposit.customAmount")),1),ue.config?((0,r.uX)(),(0,r.CE)("div",B,a[4]||(a[4]=[(0,r.Lk)("div",{class:"skeleton-input-field"},null,-1)]))):((0,r.uX)(),(0,r.CE)("div",H,[(0,r.Lk)("span",J,(0,s.v_)(le.value),1),(0,r.bo)((0,r.Lk)("input",{id:"customAmount","onUpdate:modelValue":a[1]||(a[1]=function(e){return ie.value=e}),type:"number",min:"1",placeholder:e.$t("wallet.deposit.customAmountPlaceholder"),onInput:me},null,40,Q),[[u.Jo,ie.value]])])),de.value?((0,r.uX)(),(0,r.CE)("small",Y,(0,s.v_)(de.value),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Z,[ue.config?((0,r.uX)(),(0,r.CE)("div",ee)):((0,r.uX)(),(0,r.CE)("button",{key:1,class:"btn-order",disabled:ue.submitting||!be.value||parseFloat(ie.value)<(0,c.R1)(ve),onClick:he},[ue.submitting?((0,r.uX)(),(0,r.CE)("span",ne)):((0,r.uX)(),(0,r.Wv)((0,c.R1)(d.AMT),{key:0,size:18})),(0,r.Lk)("span",null,(0,s.v_)(e.$t("wallet.deposit.button")),1)],8,ae))])])])])]);var n}}};const le=(0,n(66262).A)(te,[["__scopeId","data-v-15ee30ec"]])}}]);