"use strict";(self.webpackChunkez_theme=self.webpackChunkez_theme||[]).push([[350],{43258:(e,t,a)=>{a.d(t,{J5:()=>u,Jf:()=>d,KU:()=>s,N4:()=>v,Z7:()=>i,hh:()=>p,l8:()=>r,n$:()=>o,oX:()=>l,sm:()=>c});var n=a(96131);function o(){return(0,n.A)({url:"/user/plan/fetch",method:"get"})}function r(){return(0,n.A)({url:"/user/comm/config",method:"get"})}function l(e){return(0,n.A)({url:"/user/plan/fetch?id=".concat(e),method:"get"})}function c(e,t){return(0,n.A)({url:"/user/coupon/check",method:"post",data:{code:e,plan_id:t}})}function i(e){return(0,n.A)({url:"/user/order/save",method:"post",data:e})}function s(e){return(0,n.A)({url:"/user/order/detail?trade_no=".concat(e),method:"get"})}function u(){return(0,n.A)({url:"/user/order/getPaymentMethod",method:"get"})}function d(e){return(0,n.A)({url:"/user/order/check?trade_no=".concat(e),method:"get"})}function v(e){return(0,n.A)({url:"/user/order/cancel",method:"post",data:{trade_no:e}})}function p(e,t){return(0,n.A)({url:"/user/order/checkout",method:"post",data:{trade_no:e,method:t}})}},89350:(e,t,a)=>{a.r(t),a.d(t,{default:()=>zt});a(62010);var n=a(20641),o=a(90033),r=a(53751),l={class:"payment-container"},c={class:"payment-inner"},i={class:"dashboard-card title-card"},s={class:"card-header"},u={class:"card-title"},d={class:"card-body"},v={class:"content-wrapper"},p={class:"left-column"},m={class:"section-wrapper"},f={class:"section-title"},k={key:0,class:"product-info"},y={key:0},_={class:"info-row"},h={class:"info-label"},g={class:"info-value"},C={key:1},L={class:"info-row"},b={class:"info-label"},w={class:"info-value"},A={class:"info-row"},E={class:"info-label"},X={class:"info-value"},I={class:"info-row"},D={class:"info-label"},P={class:"info-value"},M={key:1,class:"skeleton-card"},$={class:"section-wrapper"},F={class:"section-title"},T={key:0,class:"order-info"},N={class:"info-row"},Q={class:"info-label"},S={class:"info-value"},z={class:"info-row"},O={class:"info-label"},W={class:"info-value"},x={key:0,class:"info-row"},B={class:"info-label"},R={class:"info-value amount"},G={key:1,class:"info-row"},K={class:"info-label"},Y={class:"info-value amount"},q={key:2,class:"info-row discount-row"},H={class:"info-label"},J={class:"info-value discount"},V={key:3,class:"info-row"},U={class:"info-label"},Z={class:"info-value discount"},j={key:4,class:"info-row"},ee={class:"info-label"},te={class:"info-value"},ae={key:5,class:"info-row"},ne={class:"info-label"},oe={class:"info-value fee"},re={class:"info-row final-row"},le={class:"info-label"},ce={class:"info-value final"},ie={key:1,class:"skeleton-card"},se={class:"right-column"},ue={class:"section-wrapper order-status"},de={class:"section-title"},ve={key:0,class:"status-info"},pe={class:"status-icon"},me={class:"status-text"},fe={key:0,class:"activate-status"},ke={key:1},ye={key:2},_e={key:3},he={key:4},ge={key:5},Ce={key:6},Le={key:7},be={key:1,class:"skeleton-card"},we={key:0,class:"section-wrapper free-order"},Ae={class:"section-title"},Ee={class:"free-notice"},Xe={class:"notice-text"},Ie={key:1,class:"section-wrapper"},De={class:"section-title"},Pe={key:0,class:"payment-methods"},Me=["onClick"],$e={class:"method-icon"},Fe=["src","alt"],Te={class:"method-details"},Ne={class:"method-name"},Qe={key:0,class:"method-fee"},Se={class:"method-check"},ze={key:1,class:"skeleton-card"},Oe={class:"action-buttons"},We={key:0,class:"btn-group pay-row"},xe={key:1,class:"btn-group pay-row"},Be={key:0},Re={key:1},Ge={key:0,class:"btn-group pay-row"},Ke=["disabled"],Ye={key:1,class:"loader"},qe={key:1,class:"btn-group action-row"},He=["disabled"],Je={key:1,class:"loader"},Ve=["disabled"],Ue={key:1,class:"loader"},Ze={key:2,class:"btn-group action-row"},je=["disabled"],et={key:1,class:"loader"},tt=["disabled"],at={key:1,class:"loader"},nt={key:0,class:"payment-success-overlay"},ot={class:"success-animation"},rt={class:"check-container"},lt={class:"check-background"},ct={key:0,class:"confetti-container"},it={key:0,class:"cancel-modal"},st={class:"cancel-modal-container"},ut={class:"cancel-modal-content"},dt={class:"cancel-modal-icon"},vt={class:"cancel-modal-header"},pt={class:"cancel-modal-actions"},mt={key:0,class:"modal-wrapper"},ft={class:"modal-container"},kt={class:"modal-card"},yt={class:"modal-header"},_t={class:"icon-wrapper payment"},ht={key:0},gt={key:1},Ct={key:2,class:"qrcode-container"},Lt={key:3,class:"payment-link"},bt={key:0},wt={key:1},At={class:"modal-footer"};var Et=a(20908),Xt=a(30388),It=(a(28706),a(50113),a(74423),a(44114),a(23288),a(18111),a(20116),a(9868),a(26099),a(27495),a(21699),a(47764),a(5746),a(62953),a(76031),a(48408),a(14603),a(47566),a(98721),a(50953)),Dt=a(46992),Pt=a(33366),Mt=a(75220),$t=a(43258),Ft=a(80394),Tt=a(67944),Nt=a(25910),Qt=a(98120);const St={name:"PaymentView",components:{IconCheck:Qt.iWP,IconX:Qt.MRt,IconCreditCard:Qt.Bln,IconCircle:Qt.ABt,IconCircleCheck:Qt.iQ6,IconAlertCircle:Qt.GBC,IconArrowRight:Qt.hIg,IconAlertTriangle:Qt.QO,IconRefresh:Qt.H42,IconExternalLink:Qt.HW5,IconArrowLeft:Qt.Gk,QrcodeVue:Tt.Ay,ConfettiExplosion:Nt.A,IconClock:Qt._Ll,IconLoader2:Qt.fQ5,IconHelp:Qt.Lwz},setup:function(){var e=(0,Dt.s9)().t,t=(0,Pt.d)().showToast,a=(0,Mt.lq)(),o=(0,Mt.rd)(),r=(0,It.KR)(!1),l=(0,It.Kh)({order:!0,methods:!0,checking:!1,cancelling:!1,paying:!1}),c=(0,It.KR)({}),i=(0,It.KR)([]),s=(0,It.KR)(null),u=(0,It.KR)(null),d=(0,It.KR)(!1),v=(0,It.KR)(!1),p=(0,It.KR)(!1),m=(0,It.KR)(!1),f=(0,It.KR)(!1),k=(0,It.KR)(null),y=(0,It.KR)(null),_=(0,n.EW)(function(){if(!s.value||!c.value.total_amount)return 0;var e=i.value.find(function(e){return e.id===s.value});if(!e)return 0;var t=0;return e.handling_fee_percent&&(t+=c.value.total_amount*e.handling_fee_percent/100),e.handling_fee_fixed&&(t+=e.handling_fee_fixed),Math.round(t)}),h=(0,n.EW)(function(){return c.value.total_amount?c.value.total_amount+_.value:0}),g=function(){var n=(0,Xt.A)((0,Et.A)().m(function n(){var r,i,s;return(0,Et.A)().w(function(n){for(;;)switch(n.p=n.n){case 0:if(l.order=!0,n.p=1,r=null,(i=new URLSearchParams(window.location.search||window.location.hash.split("?")[1]||"")).has("trade_no")&&(r=i.get("trade_no")),!r&&i.has("out_trade_no")&&(r=i.get("out_trade_no")),r||(r=a.query.trade_no||a.query.out_trade_no),r){n.n=2;break}return t(e("payment.no_order_selected"),"error"),o.push("/shop"),n.a(2);case 2:return n.n=3,(0,$t.KU)(r);case 3:(s=n.v).data?(c.value=s.data,0===c.value.status&&0===c.value.total_amount&&b()):(t(e("payment.order_not_found"),"error"),o.push("/shop")),n.n=5;break;case 4:n.p=4,n.v,t(e("payment.failed_to_fetch_order"),"error"),o.push("/shop");case 5:return n.p=5,l.order=!1,n.f(5);case 6:return n.a(2)}},n,null,[[1,4,5,6]])}));return function(){return n.apply(this,arguments)}}(),C=function(){var a=(0,Xt.A)((0,Et.A)().m(function a(){var n;return(0,Et.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:return l.methods=!0,a.p=1,a.n=2,(0,$t.J5)();case 2:(n=a.v).data&&(i.value=n.data,(1===i.value.length||Ft.PAYMENT_CONFIG.autoSelectFirstMethod)&&i.value.length>0&&(s.value=i.value[0].id)),a.n=4;break;case 3:a.p=3,a.v,t(e("payment.failed_to_fetch_methods"),"error");case 4:return a.p=4,l.methods=!1,a.f(4);case 5:return a.a(2)}},a,null,[[1,3,4,5]])}));return function(){return a.apply(this,arguments)}}(),L=function(){var a=(0,Xt.A)((0,Et.A)().m(function a(){return(0,Et.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:if(!(c.value.total_amount>0)||s.value){a.n=1;break}return t(e("payment.select_method_first"),"warning"),a.a(2);case 1:return l.checking=!0,a.p=2,0===c.value.total_amount&&i.value&&i.value.length>0&&(s.value=i.value[0].id),a.n=3,(0,$t.hh)(c.value.trade_no,s.value);case 3:t(e("payment.payment_processing"),"info"),b(),a.n=5;break;case 4:a.p=4,a.v,t(e("payment.check_failed"),"error"),l.checking=!1;case 5:return a.a(2)}},a,null,[[2,4]])}));return function(){return a.apply(this,arguments)}}(),b=function(){var a=(0,Xt.A)((0,Et.A)().m(function a(){var n,o;return(0,Et.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:if(a.p=0,!d.value){a.n=1;break}return a.a(2);case 1:return a.n=2,w();case 2:0!==c.value.total_amount||d.value?c.value.total_amount>0&&!d.value&&(u.value&&clearInterval(u.value),Ft.PAYMENT_CONFIG.autoCheckPayment?(n=0,u.value=setInterval(function(){n++,w(),Ft.PAYMENT_CONFIG.autoCheckMaxTimes>0&&n>=Ft.PAYMENT_CONFIG.autoCheckMaxTimes&&(clearInterval(u.value),l.checking=!1,d.value||t(e("payment.check_timeout"),"info"))},Ft.PAYMENT_CONFIG.autoCheckInterval)):(o=0,u.value=setInterval(function(){o++,w(),o>=2&&(clearInterval(u.value),l.checking=!1,d.value||t(e("payment.check_timeout"),"info"))},5e3))):setTimeout((0,Xt.A)((0,Et.A)().m(function e(){return(0,Et.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,w(true);case 1:return e.a(2)}},e)})),1e3),a.n=4;break;case 3:a.p=3,a.v,t(e("payment.check_failed"),"error"),l.checking=!1;case 4:return a.a(2)}},a,null,[[0,3]])}));return function(){return a.apply(this,arguments)}}(),w=function(){var a=(0,Xt.A)((0,Et.A)().m(function a(){var n,o,r=arguments;return(0,Et.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:return n=r.length>0&&void 0!==r[0]&&r[0],a.p=1,a.n=2,(0,$t.Jf)(c.value.trade_no);case 2:1===(o=a.v).data?(c.value.status=o.data,setTimeout(function(){var e=document.querySelector(".order-status-notice");e&&e.classList.add("status-transition"),c.value.status=3,A(!n)},1e3)):0!==o.data&&2!==o.data?(c.value.status=o.data,A(!n)):2===o.data&&(u.value&&(clearInterval(u.value),u.value=null),n||t(e("payment.order_cancelled"),"warning"),l.checking=!1,l.paying=!1,c.value.status=o.data,E()),0===c.value.total_amount&&(l.checking=!1,l.paying=!1),a.n=4;break;case 3:a.p=3,a.v,0===c.value.total_amount&&(l.checking=!1,l.paying=!1);case 4:return a.a(2)}},a,null,[[1,3]])}));return function(){return a.apply(this,arguments)}}(),A=function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];d.value||(u.value&&(clearInterval(u.value),u.value=null),d.value=!0,l.checking=!1,l.paying=!1,E(),r.value||(v.value=!0,(0,n.dY)(function(){setTimeout(function(){p.value=!0},300),a&&t(e("payment.pay_success"),"success"),setTimeout(function(){p.value=!1,setTimeout(function(){v.value=!1},500)},4500)})))},E=function(){f.value=!1,k.value=null,y.value=null},X=function(){var a=(0,Xt.A)((0,Et.A)().m(function a(){var n,o,r;return(0,Et.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:if(s.value){a.n=1;break}return t(e("payment.select_method_first"),"warning"),a.a(2);case 1:return l.paying=!0,a.p=2,a.n=3,(0,$t.hh)(c.value.trade_no,s.value);case 3:(n=a.v).data&&(0===n.type?(k.value=n.data,y.value=null,f.value=!0):1===n.type&&(y.value=n.data,k.value=null,o="Safari"===(0,Ft.detectBrowser)(),r=Ft.PAYMENT_CONFIG.useSafariPaymentModal,o&&r?f.value=!0:Ft.PAYMENT_CONFIG.openPaymentInNewTab?setTimeout(function(){var e=document.createElement("a");e.href=n.data,e.target="_blank",e.rel="noopener noreferrer",document.body.appendChild(e),e.click(),document.body.removeChild(e),f.value=!0},100):setTimeout(function(){var e=document.createElement("a");e.href=n.data,e.rel="noopener noreferrer",document.body.appendChild(e),e.click(),document.body.removeChild(e)},100)),b()),a.n=5;break;case 4:a.p=4,a.v,t(e("payment.check_failed"),"error");case 5:return a.p=5,l.paying=!1,a.f(5);case 6:return a.a(2)}},a,null,[[2,4,5,6]])}));return function(){return a.apply(this,arguments)}}(),I=function(){var a=(0,Xt.A)((0,Et.A)().m(function a(){return(0,Et.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:return l.cancelling=!0,m.value=!1,a.p=1,a.n=2,(0,$t.N4)(c.value.trade_no);case 2:t(e("payment.cancel_success"),"success"),u.value&&clearInterval(u.value),o.push("/shop"),a.n=4;break;case 3:a.p=3,a.v,t(e("payment.cancel_failed"),"error");case 4:return a.p=4,l.cancelling=!1,a.f(4);case 5:return a.a(2)}},a,null,[[1,3,4,5]])}));return function(){return a.apply(this,arguments)}}(),D=function(){var a=(0,Xt.A)((0,Et.A)().m(function a(){var n;return(0,Et.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:return l.checking=!0,a.p=1,a.n=2,(0,$t.Jf)(c.value.trade_no);case 2:0===(n=a.v).data?t(e("payment.payment_pending"),"info"):2===n.data?(t(e("payment.order_cancelled"),"warning"),u.value&&(clearInterval(u.value),u.value=null),c.value.status=n.data):(t(e("payment.payment_successful"),"success"),c.value.status=n.data,d.value=!0,u.value&&(clearInterval(u.value),u.value=null),E(),v.value=!0,setTimeout(function(){p.value=!0},300),setTimeout(function(){p.value=!1,setTimeout(function(){v.value=!1},500)},4500)),a.n=4;break;case 3:a.p=3,a.v,t(e("payment.check_failed"),"error");case 4:return a.p=4,l.checking=!1,l.paying=!1,a.f(4);case 5:return a.a(2)}},a,null,[[1,3,4,5]])}));return function(){return a.apply(this,arguments)}}();return(0,n.sV)(function(){g(),C(),"orders"===a.query.from||document.referrer&&document.referrer.includes("/orders")?r.value=!0:r.value=!1,(0,n.wB)(function(){return c.value.status},function(e){3!==e&&4!==e||d.value||(d.value=!0,r.value||(v.value=!0,(0,n.dY)(function(){setTimeout(function(){p.value=!0},300),setTimeout(function(){p.value=!1,setTimeout(function(){v.value=!1},500)},4500)})))},{immediate:!1})}),(0,n.xo)(function(){u.value&&clearInterval(u.value)}),{loading:l,orderDetail:c,paymentMethods:i,selectedMethod:s,paymentSuccessful:d,showSuccessAnimation:v,showConfettiAnimation:p,fromOrderList:r,formatDate:function(e){return e?new Date(1e3*e).toLocaleString():"-"},formatAmount:function(e){return null==e?"-":"\xa5".concat((e/100).toFixed(2))},formatPeriod:function(t){return"reset_price"===t||"deposit"===t?e("payment.period_types.".concat(t)):{month_price:e("shop.plan.price_options.month"),quarter_price:e("shop.plan.price_options.quarter"),half_year_price:e("shop.plan.price_options.half_year"),year_price:e("shop.plan.price_options.year"),two_year_price:e("shop.plan.price_options.two_year"),three_year_price:e("shop.plan.price_options.three_year"),onetime_price:e("shop.plan.price_options.onetime")}[t]||t},formatTraffic:function(e){return e?e>=1024?"".concat((e/1024).toFixed(1)," TB"):"".concat(e," GB"):"-"},formatFee:function(t){var a="";if(t.handling_fee_percent&&(a+="".concat(t.handling_fee_percent,"%")),t.handling_fee_fixed){var n=(t.handling_fee_fixed/100).toFixed(2);a+=a?" + \xa5".concat(n):"\xa5".concat(n)}return a?"".concat(e("payment.fee"),": ").concat(a):""},selectMethod:function(e){s.value=e},checkPayment:L,cancelCurrentOrder:function(){l.cancelling||(m.value=!0)},goToDashboard:function(){"deposit"===c.value.period?o.push("/wallet/deposit"):o.push("/dashboard")},getPlanPrice:function(){return c.value&&c.value.plan&&c.value.period&&c.value.plan[c.value.period]||0},showCancelConfirm:m,confirmCancel:I,closeModal:function(){m.value=!1},showPaymentModal:f,paymentQRCode:k,paymentLink:y,PAYMENT_CONFIG:Ft.PAYMENT_CONFIG,getSelectedMethodName:function(){if(!s.value)return"";var e=i.value.find(function(e){return e.id===s.value});return e?e.name:""},processPayment:X,openPaymentLink:function(){if(y.value)try{var e="Safari"===(0,Ft.detectBrowser)();if(Ft.PAYMENT_CONFIG.openPaymentInNewTab||e&&Ft.PAYMENT_CONFIG.useSafariPaymentModal){var t=document.createElement("a");t.href=y.value,t.target="_blank",t.rel="noopener noreferrer",document.body.appendChild(t),t.click(),document.body.removeChild(t)}else{var a=document.createElement("a");a.href=y.value,a.rel="noopener noreferrer",document.body.appendChild(a),a.click(),document.body.removeChild(a)}}catch(e){Ft.PAYMENT_CONFIG.openPaymentInNewTab?window.open(y.value,"_blank"):window.location.href=y.value}},closePaymentModal:E,handleFeeAmount:_,totalWithFee:h,window,checkPaymentStatus:D,detectBrowser:Ft.detectBrowser,getStatusText:function(t){return{0:e("payment.status.pending"),1:e("payment.status.processing"),2:e("payment.status.cancelled"),3:e("payment.status.completed"),4:e("payment.status.discounted")}[t]||e("payment.status.unknown")},getStatusClass:function(e){return{0:"status-pending",1:"status-processing",2:"status-cancelled",3:"status-completed",4:"status-discounted"}[e]||"status-unknown"},goBack:function(){o.go(-1)}}}};const zt=(0,a(66262).A)(St,[["render",function(e,t,a,Et,Xt,It){var Dt,Pt,Mt=(0,n.g2)("IconClock"),$t=(0,n.g2)("IconLoader2"),Ft=(0,n.g2)("IconX"),Tt=(0,n.g2)("IconCheck"),Nt=(0,n.g2)("IconHelp"),Qt=(0,n.g2)("IconAlertCircle"),St=(0,n.g2)("IconCreditCard"),zt=(0,n.g2)("IconCircleCheck"),Ot=(0,n.g2)("IconCircle"),Wt=(0,n.g2)("IconArrowLeft"),xt=(0,n.g2)("IconArrowRight"),Bt=(0,n.g2)("IconRefresh"),Rt=(0,n.g2)("ConfettiExplosion"),Gt=(0,n.g2)("IconAlertTriangle"),Kt=(0,n.g2)("QrcodeVue"),Yt=(0,n.g2)("IconExternalLink");return(0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("div",c,[(0,n.Lk)("div",i,[(0,n.Lk)("div",s,[(0,n.Lk)("h2",u,(0,o.v_)(e.$t("payment.title")),1)]),(0,n.Lk)("div",d,[(0,n.Lk)("p",null,(0,o.v_)(e.$t("payment.description")),1)])]),(0,n.Lk)("div",v,[(0,n.Lk)("div",p,[(0,n.Lk)("div",m,[(0,n.Lk)("div",f,[(0,n.Lk)("span",null,(0,o.v_)(e.$t("payment.product_info")),1)]),Et.loading.order?((0,n.uX)(),(0,n.CE)("div",M,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(3,function(e){return(0,n.Lk)("div",{class:"skeleton-text",key:"product-"+e})}),64))])):((0,n.uX)(),(0,n.CE)("div",k,["deposit"===Et.orderDetail.period?((0,n.uX)(),(0,n.CE)("div",y,[(0,n.Lk)("div",_,[(0,n.Lk)("div",h,(0,o.v_)(e.$t("wallet.deposit.title")),1),(0,n.Lk)("div",g,(0,o.v_)(Et.formatAmount(Et.orderDetail.total_amount)),1)])])):((0,n.uX)(),(0,n.CE)("div",C,[(0,n.Lk)("div",L,[(0,n.Lk)("div",b,(0,o.v_)(e.$t("payment.plan_name")),1),(0,n.Lk)("div",w,(0,o.v_)((null===(Dt=Et.orderDetail.plan)||void 0===Dt?void 0:Dt.name)||"-"),1)]),(0,n.Lk)("div",A,[(0,n.Lk)("div",E,(0,o.v_)(e.$t("payment.period")),1),(0,n.Lk)("div",X,(0,o.v_)(Et.formatPeriod(Et.orderDetail.period)),1)]),(0,n.Lk)("div",I,[(0,n.Lk)("div",D,(0,o.v_)(e.$t("payment.traffic")),1),(0,n.Lk)("div",P,(0,o.v_)(Et.formatTraffic(null===(Pt=Et.orderDetail.plan)||void 0===Pt?void 0:Pt.transfer_enable)),1)])]))]))]),(0,n.Lk)("div",$,[(0,n.Lk)("div",F,[(0,n.Lk)("span",null,(0,o.v_)(e.$t("payment.order_info")),1)]),Et.loading.order?((0,n.uX)(),(0,n.CE)("div",ie,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(5,function(e){return(0,n.Lk)("div",{class:"skeleton-text",key:"order-"+e})}),64))])):((0,n.uX)(),(0,n.CE)("div",T,[(0,n.Lk)("div",N,[(0,n.Lk)("div",Q,(0,o.v_)(e.$t("payment.trade_no")),1),(0,n.Lk)("div",S,(0,o.v_)(Et.orderDetail.trade_no||"-"),1)]),(0,n.Lk)("div",z,[(0,n.Lk)("div",O,(0,o.v_)(e.$t("payment.created_at")),1),(0,n.Lk)("div",W,(0,o.v_)(Et.formatDate(Et.orderDetail.created_at)),1)]),"deposit"===Et.orderDetail.period?((0,n.uX)(),(0,n.CE)("div",x,[(0,n.Lk)("div",B,(0,o.v_)(e.$t("wallet.deposit.title")),1),(0,n.Lk)("div",R,(0,o.v_)(Et.formatAmount(Et.orderDetail.total_amount)),1)])):((0,n.uX)(),(0,n.CE)("div",G,[(0,n.Lk)("div",K,(0,o.v_)(e.$t("payment.total_price")),1),(0,n.Lk)("div",Y,(0,o.v_)(Et.formatAmount(Et.getPlanPrice())),1)])),Et.orderDetail.discount_amount>0?((0,n.uX)(),(0,n.CE)("div",q,[(0,n.Lk)("div",H,(0,o.v_)(e.$t("payment.discount_amount")),1),(0,n.Lk)("div",J,"-"+(0,o.v_)(Et.formatAmount(Et.orderDetail.discount_amount)),1)])):(0,n.Q3)("",!0),null!==Et.orderDetail.balance_amount&&void 0!==Et.orderDetail.balance_amount&&Et.orderDetail.balance_amount>0?((0,n.uX)(),(0,n.CE)("div",V,[(0,n.Lk)("div",U,(0,o.v_)(e.$t("payment.use_credit")),1),(0,n.Lk)("div",Z,"-"+(0,o.v_)(Et.formatAmount(Et.orderDetail.balance_amount)),1)])):(0,n.Q3)("",!0),null!==Et.orderDetail.refund_amount&&void 0!==Et.orderDetail.refund_amount&&Et.orderDetail.refund_amount>0?((0,n.uX)(),(0,n.CE)("div",j,[(0,n.Lk)("div",ee,(0,o.v_)(e.$t("payment.refund_amount")),1),(0,n.Lk)("div",te,(0,o.v_)(Et.formatAmount(Et.orderDetail.refund_amount)),1)])):(0,n.Q3)("",!0),Et.selectedMethod&&Et.handleFeeAmount>0?((0,n.uX)(),(0,n.CE)("div",ae,[(0,n.Lk)("div",ne,(0,o.v_)(e.$t("payment.handling_fee")),1),(0,n.Lk)("div",oe,(0,o.v_)(Et.formatAmount(Et.handleFeeAmount)),1)])):(0,n.Q3)("",!0),(0,n.Lk)("div",re,[(0,n.Lk)("div",le,(0,o.v_)(e.$t("payment.total_with_fee")),1),(0,n.Lk)("div",ce,(0,o.v_)(Et.formatAmount(Et.totalWithFee)),1)])]))])]),(0,n.Lk)("div",se,[(0,n.Lk)("div",ue,[(0,n.Lk)("div",de,[(0,n.Lk)("span",null,(0,o.v_)(e.$t("payment.order_status")),1)]),Et.loading.order?((0,n.uX)(),(0,n.CE)("div",be,t[15]||(t[15]=[(0,n.Lk)("div",{class:"skeleton-text"},null,-1)]))):((0,n.uX)(),(0,n.CE)("div",ve,[(0,n.Lk)("div",{class:(0,o.C4)(["order-status-notice",Et.getStatusClass(Et.orderDetail.status)])},[(0,n.Lk)("div",pe,[0===Et.orderDetail.status&&Et.orderDetail.total_amount>0?((0,n.uX)(),(0,n.Wv)(Mt,{key:0,size:48})):0===Et.orderDetail.status&&0===Et.orderDetail.total_amount?((0,n.uX)(),(0,n.Wv)(Mt,{key:1,size:48})):1===Et.orderDetail.status?((0,n.uX)(),(0,n.Wv)($t,{key:2,size:48,class:"rotating-icon"})):2===Et.orderDetail.status?((0,n.uX)(),(0,n.Wv)(Ft,{key:3,size:48})):3===Et.orderDetail.status?((0,n.uX)(),(0,n.Wv)(Tt,{key:4,size:48})):4===Et.orderDetail.status?((0,n.uX)(),(0,n.Wv)(Tt,{key:5,size:48})):((0,n.uX)(),(0,n.Wv)(Nt,{key:6,size:48}))]),(0,n.Lk)("div",me,[0===Et.orderDetail.status&&0===Et.orderDetail.total_amount?((0,n.uX)(),(0,n.CE)("h3",fe,(0,o.v_)(e.$t("payment.status.activate")),1)):((0,n.uX)(),(0,n.CE)("h3",ke,(0,o.v_)(Et.getStatusText(Et.orderDetail.status)),1)),0===Et.orderDetail.status&&Et.orderDetail.total_amount>0?((0,n.uX)(),(0,n.CE)("p",ye,(0,o.v_)(e.$t("payment.description")),1)):1===Et.orderDetail.status?((0,n.uX)(),(0,n.CE)("p",_e,(0,o.v_)(e.$t("payment.payment_processing")),1)):2===Et.orderDetail.status?((0,n.uX)(),(0,n.CE)("p",he,(0,o.v_)(e.$t("payment.order_cancelled")),1)):3===Et.orderDetail.status?((0,n.uX)(),(0,n.CE)("p",ge,(0,o.v_)(e.$t("payment.payment_successful_desc")),1)):4===Et.orderDetail.status?((0,n.uX)(),(0,n.CE)("p",Ce,(0,o.v_)(e.$t("payment.payment_successful_desc")),1)):0!==Et.orderDetail.status?((0,n.uX)(),(0,n.CE)("p",Le,(0,o.v_)(e.$t("payment.unknown_status_desc")),1)):(0,n.Q3)("",!0)])],2)]))]),Et.loading.order||0!==Et.orderDetail.total_amount||0!==Et.orderDetail.status?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",we,[(0,n.Lk)("div",Ae,[(0,n.Lk)("span",null,(0,o.v_)(e.$t("payment.free_order")),1)]),(0,n.Lk)("div",Ee,[(0,n.bF)(Qt,{size:48,class:"notice-icon success"}),(0,n.Lk)("div",Xe,[(0,n.Lk)("h3",null,(0,o.v_)(e.$t("payment.free_order_title")),1),(0,n.Lk)("p",null,(0,o.v_)(e.$t("payment.free_order_desc")),1)])])])),!Et.loading.order&&0===Et.orderDetail.status&&Et.orderDetail.total_amount>0?((0,n.uX)(),(0,n.CE)("div",Ie,[(0,n.Lk)("div",De,[(0,n.Lk)("span",null,(0,o.v_)(e.$t("payment.payment_method")),1)]),Et.loading.methods?((0,n.uX)(),(0,n.CE)("div",ze,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(2,function(e){return(0,n.Lk)("div",{class:"skeleton-payment-method",key:"method-"+e})}),64))])):((0,n.uX)(),(0,n.CE)("div",Pe,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(Et.paymentMethods,function(e){return(0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["payment-method-item",{active:Et.selectedMethod===e.id}]),key:e.id,onClick:function(t){return Et.selectMethod(e.id)}},[(0,n.Lk)("div",$e,[e.icon?((0,n.uX)(),(0,n.CE)("img",{key:1,src:e.icon,alt:e.name},null,8,Fe)):((0,n.uX)(),(0,n.Wv)(St,{key:0}))]),(0,n.Lk)("div",Te,[(0,n.Lk)("div",Ne,(0,o.v_)(e.name),1),e.handling_fee_percent||e.handling_fee_fixed?((0,n.uX)(),(0,n.CE)("div",Qe,(0,o.v_)(Et.formatFee(e)),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Se,[Et.selectedMethod===e.id?((0,n.uX)(),(0,n.Wv)(zt,{key:0})):((0,n.uX)(),(0,n.Wv)(Ot,{key:1}))])],10,Me)}),128))]))])):(0,n.Q3)("",!0),(0,n.Lk)("div",Oe,[Et.fromOrderList&&(Et.paymentSuccessful||0!==Et.orderDetail.status)?((0,n.uX)(),(0,n.CE)("div",We,[(0,n.Lk)("button",{class:"btn-back main-action full-width",onClick:t[0]||(t[0]=function(){return Et.goBack&&Et.goBack.apply(Et,arguments)})},[(0,n.bF)(Wt,{size:18}),(0,n.Lk)("span",null,(0,o.v_)(e.$t("payment.return_to_previous")),1)])])):(0,n.Q3)("",!0),(Et.paymentSuccessful||Et.orderDetail.status>0)&&!Et.fromOrderList?((0,n.uX)(),(0,n.CE)("div",xe,[(0,n.Lk)("button",{class:"btn-pay main-action full-width",onClick:t[1]||(t[1]=function(){return Et.goToDashboard&&Et.goToDashboard.apply(Et,arguments)})},[(0,n.bF)(xt,{size:18}),"deposit"===Et.orderDetail.period?((0,n.uX)(),(0,n.CE)("span",Be,(0,o.v_)(e.$t("payment.continue_to_wallet")),1)):((0,n.uX)(),(0,n.CE)("span",Re,(0,o.v_)(e.$t("payment.continue_to_dashboard")),1))])])):(0,n.Q3)("",!0),Et.loading.order||0!==Et.orderDetail.status||Et.paymentSuccessful?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)(n.FK,{key:2},[Et.orderDetail.total_amount>0?((0,n.uX)(),(0,n.CE)("div",Ge,[(0,n.Lk)("button",{class:"btn-pay main-action full-width",onClick:t[2]||(t[2]=function(){return Et.processPayment&&Et.processPayment.apply(Et,arguments)}),disabled:Et.orderDetail.total_amount>0&&!Et.selectedMethod||Et.loading.paying||Et.loading.checking},[Et.loading.paying?((0,n.uX)(),(0,n.CE)("div",Ye)):((0,n.uX)(),(0,n.Wv)(St,{key:0,size:18})),(0,n.Lk)("span",null,(0,o.v_)(e.$t("payment.pay_now")),1)],8,Ke)])):(0,n.Q3)("",!0),0===Et.orderDetail.total_amount?((0,n.uX)(),(0,n.CE)("div",qe,[(0,n.Lk)("button",{class:"btn-back secondary-action",onClick:t[3]||(t[3]=function(){return Et.cancelCurrentOrder&&Et.cancelCurrentOrder.apply(Et,arguments)}),disabled:Et.loading.cancelling},[Et.loading.cancelling?((0,n.uX)(),(0,n.CE)("div",Je)):((0,n.uX)(),(0,n.Wv)(Ft,{key:0,size:18})),(0,n.Lk)("span",null,(0,o.v_)(e.$t("payment.cancel_order")),1)],8,He),(0,n.Lk)("button",{class:"btn-pay main-action",onClick:t[4]||(t[4]=function(){return Et.checkPayment&&Et.checkPayment.apply(Et,arguments)}),disabled:Et.loading.checking},[Et.loading.checking?((0,n.uX)(),(0,n.CE)("div",Ue)):((0,n.uX)(),(0,n.Wv)(St,{key:0,size:18})),(0,n.Lk)("span",null,(0,o.v_)(e.$t("payment.activate")),1)],8,Ve)])):(0,n.Q3)("",!0),Et.orderDetail.total_amount>0?((0,n.uX)(),(0,n.CE)("div",Ze,[(0,n.Lk)("button",{class:"btn-back secondary-action",onClick:t[5]||(t[5]=function(){return Et.cancelCurrentOrder&&Et.cancelCurrentOrder.apply(Et,arguments)}),disabled:Et.loading.cancelling},[Et.loading.cancelling?((0,n.uX)(),(0,n.CE)("div",et)):((0,n.uX)(),(0,n.Wv)(Ft,{key:0,size:18})),(0,n.Lk)("span",null,(0,o.v_)(e.$t("payment.cancel_order")),1)],8,je),(0,n.Lk)("button",{class:"btn-check secondary-action",onClick:t[6]||(t[6]=function(){return Et.checkPaymentStatus&&Et.checkPaymentStatus.apply(Et,arguments)}),disabled:Et.orderDetail.total_amount>0&&!Et.selectedMethod||Et.loading.checking||Et.loading.paying},[Et.loading.checking?((0,n.uX)(),(0,n.CE)("div",at)):((0,n.uX)(),(0,n.Wv)(Bt,{key:0,size:18})),(0,n.Lk)("span",null,(0,o.v_)(e.$t("payment.check_payment")),1)],8,tt)])):(0,n.Q3)("",!0)],64))])])])]),(0,n.bF)(r.eB,{name:"fade"},{default:(0,n.k6)(function(){return[Et.showSuccessAnimation?((0,n.uX)(),(0,n.CE)("div",nt,[(0,n.Lk)("div",ot,[(0,n.Lk)("div",rt,[(0,n.Lk)("div",lt,[(0,n.bF)(Tt,{size:100,class:"check-icon"})])]),(0,n.Lk)("h2",null,(0,o.v_)(e.$t("payment.payment_successful")),1),(0,n.Lk)("p",null,(0,o.v_)(e.$t("payment.payment_successful_desc")),1)]),Et.showConfettiAnimation?((0,n.uX)(),(0,n.CE)("div",ct,[(0,n.bF)(Rt,{particleCount:150,force:.4,stageWidth:Et.window.innerWidth,stageHeight:Et.window.innerHeight,colors:["#ffcc00","#ff8800","#ff3333","#26A65B","#42A5F5","#9C27B0"]},null,8,["stageWidth","stageHeight"])])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)]}),_:1}),(0,n.bF)(r.eB,{name:"modal-fade"},{default:(0,n.k6)(function(){return[Et.showCancelConfirm?((0,n.uX)(),(0,n.CE)("div",it,[(0,n.Lk)("div",{class:"cancel-modal-overlay",onClick:t[7]||(t[7]=function(){return Et.closeModal&&Et.closeModal.apply(Et,arguments)})}),(0,n.Lk)("div",st,[(0,n.Lk)("div",ut,[(0,n.Lk)("div",dt,[(0,n.bF)(Gt,{size:28})]),(0,n.Lk)("div",vt,[(0,n.Lk)("h3",null,(0,o.v_)(e.$t("payment.confirm_cancel_title")),1),(0,n.Lk)("p",null,(0,o.v_)(e.$t("payment.confirm_cancel_desc")),1)]),(0,n.Lk)("div",pt,[(0,n.Lk)("button",{class:"cancel-btn",onClick:t[8]||(t[8]=function(){return Et.closeModal&&Et.closeModal.apply(Et,arguments)})},(0,o.v_)(e.$t("common.cancel")),1),(0,n.Lk)("button",{class:"confirm-btn",onClick:t[9]||(t[9]=function(){return Et.confirmCancel&&Et.confirmCancel.apply(Et,arguments)})},(0,o.v_)(e.$t("common.confirm")),1)])])])])):(0,n.Q3)("",!0)]}),_:1}),(0,n.bF)(r.eB,{name:"modal"},{default:(0,n.k6)(function(){return[Et.showPaymentModal?((0,n.uX)(),(0,n.CE)("div",mt,[(0,n.Lk)("div",{class:"modal-backdrop",onClick:t[10]||(t[10]=function(){return Et.closePaymentModal&&Et.closePaymentModal.apply(Et,arguments)})}),(0,n.Lk)("div",ft,[(0,n.Lk)("div",kt,[(0,n.Lk)("button",{class:"close-button",onClick:t[11]||(t[11]=function(){return Et.closePaymentModal&&Et.closePaymentModal.apply(Et,arguments)})},"\xd7"),(0,n.Lk)("div",yt,[(0,n.Lk)("div",_t,[(0,n.bF)(St,{size:32})]),(0,n.Lk)("h3",null,(0,o.v_)(Et.selectedMethod?Et.getSelectedMethodName():e.$t("payment.payment_method")),1),"Safari"===Et.detectBrowser()&&Et.PAYMENT_CONFIG.useSafariPaymentModal&&Et.paymentLink?((0,n.uX)(),(0,n.CE)("p",ht,(0,o.v_)(e.$t("payment.safari_payment_notice")),1)):((0,n.uX)(),(0,n.CE)("p",gt,(0,o.v_)(e.$t("payment.scan_qrcode")),1)),Et.paymentQRCode?((0,n.uX)(),(0,n.CE)("div",Ct,[(0,n.bF)(Kt,{value:Et.paymentQRCode,size:Et.PAYMENT_CONFIG.qrcodeSize,background:Et.PAYMENT_CONFIG.qrcodeBackground,foreground:Et.PAYMENT_CONFIG.qrcodeColor,level:"H","render-as":"svg"},null,8,["value","size","background","foreground"])])):(0,n.Q3)("",!0),Et.paymentLink?((0,n.uX)(),(0,n.CE)("div",Lt,[(0,n.Lk)("button",{class:"btn-link",onClick:t[12]||(t[12]=function(){return Et.openPaymentLink&&Et.openPaymentLink.apply(Et,arguments)})},[(0,n.bF)(Yt,{size:18}),"Safari"===Et.detectBrowser()&&Et.PAYMENT_CONFIG.useSafariPaymentModal?((0,n.uX)(),(0,n.CE)("span",bt,(0,o.v_)(e.$t("payment.safari_payment_button")),1)):((0,n.uX)(),(0,n.CE)("span",wt,(0,o.v_)(e.$t("payment.open_in_new_tab")),1))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",At,[(0,n.Lk)("button",{class:"btn-secondary",onClick:t[13]||(t[13]=function(){return Et.closePaymentModal&&Et.closePaymentModal.apply(Et,arguments)})},[(0,n.bF)(Ft,{size:18}),(0,n.Lk)("span",null,(0,o.v_)(e.$t("common.cancel")),1)]),(0,n.Lk)("button",{class:"btn-primary",onClick:t[14]||(t[14]=function(){return Et.checkPayment&&Et.checkPayment.apply(Et,arguments)})},[(0,n.bF)(Bt,{size:18}),(0,n.Lk)("span",null,(0,o.v_)(e.$t("payment.check_payment")),1)])])])])])):(0,n.Q3)("",!0)]}),_:1})])}],["__scopeId","data-v-5bdcc1e9"]])}}]);